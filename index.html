<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒŸãƒ‹ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ </title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React and ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel Standalone for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    body {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // ã‚¢ã‚¤ã‚³ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆSVGï¼‰
    const RotateCcw = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
      </svg>
    );

    const Award = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
      </svg>
    );

    const scenarios = [
      {
        id: 1,
        title: 'è¬ã®ä¾é ¼',
        setup: 'ã‚ãªãŸã¯æ¢åµäº‹å‹™æ‰€ã§å¤ã„å†™çœŸã‚’æ‰‹æ¸¡ã•ã‚Œã¾ã—ãŸã€‚',
        choices: [
          { id: 1, text: 'å†™çœŸã®äººç‰©ã«ã¤ã„ã¦èª¿ã¹ã‚‹', preview: 'ç§ï¼šã€Œã“ã®äººç‰©ã¯...' },
          { id: 2, text: 'å†™çœŸã®èƒŒæ™¯ã«ã¤ã„ã¦èª¿ã¹ã‚‹', preview: 'ç§ï¼šã€Œã“ã®å»ºç‰©ã¯...' }
        ],
        branches: {
          1: {
            text: 'ç§ï¼šã€Œã“ã®äººç‰©ã¯10å¹´å‰ã«å¤±è¸ªã—ãŸç”°ä¸­æ§˜ã§ã™ã­ã€\nä¾é ¼äººï¼šã€Œãã†ã€ã§ã‚‚ç§ãŒçŸ¥ã‚ŠãŸã„ã®ã¯ãƒ»ãƒ»ãƒ»ã€\nç§ï¼šã€Œå¤±ç¤¼ã—ã¾ã—ãŸã€‚ã€ã‚‚ã†ã²ã¨ã¤ã€‘ã®æ‰‹ãŒã‹ã‚Šã‚’èª¿ã¹ã¾ã™ã€‚èƒŒæ™¯ã®å»ºç‰©ã§ã™ã­ã€\n\n(ã‚ãªãŸã¯ä½•ã‹ã‚’è¦‹ã¤ã‘ãŸæ°—ãŒã—ãŸã€‚å†™çœŸã®éš…ã«å°ã•ãªæ–‡å­—ãŒ...ã€Œã‚‚ã€)',
            hasWord: true,
            epilogue: 'ãã®å¾Œã€ã‚ãªãŸã¯èƒŒæ™¯ã®æ‰‹ãŒã‹ã‚Šã‹ã‚‰äº‹ä»¶ã‚’è§£æ±ºã—ã€ä¸€äººå‰ã®æ¢åµã¨ã—ã¦èªã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n(ä½•ã‹ãŒé›†ã¾ã‚Šå§‹ã‚ã¦ã„ã‚‹...ã€Œã‚‚ã€ã¨ã„ã†æ–‡å­—ã‚’æ‰‹ã«å…¥ã‚ŒãŸ)',
            epilogue2: 'ã‚‚ã‚‚å­ã•ã‚“ã¯ã€ã‚ãªãŸã®æ¢åµã¨ã—ã¦ã®æˆé•·ã‚’èªã‚ã¦ãã‚Œã¾ã—ãŸã€‚\nã€Œã‚ãªãŸã¯æœ¬å½“ã«å„ªç§€ãªæ¢åµã­ã€‚ã¾ãŸä½•ã‹ã‚ã£ãŸã‚‰ã€ãŠé¡˜ã„ã—ã¾ã™ã€\nãã†è¨€ã£ã¦ã€ã‚‚ã‚‚å­ã•ã‚“ã¯ç¬‘é¡”ã§å¸°ã£ã¦ã„ãã¾ã—ãŸã€‚\nã‚ãªãŸã¯ã€å†™çœŸã®éš…ã«ã‚ã£ãŸå°ã•ãªæ–‡å­—ã€Œã‚‚ã€ã‚’å¤§åˆ‡ã«ä¿ç®¡ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚'
          },
          2: {
            text: 'ç§ï¼šã€Œã“ã®å»ºç‰©ã¯å–ã‚Šå£Šã•ã‚ŒãŸæ—§å¸‚åºèˆã§ã™ã€\nä¾é ¼äººï¼šã€Œã¾ã•ã«ãã“!ã‚ã‚ŠãŒã¨ã†ã€æ¢åµã•ã‚“ã€',
            hasWord: false,
            epilogue: 'äº‹ä»¶ã¯è§£æ±ºã—ã¾ã—ãŸãŒã€ä½•ã‹ç‰©è¶³ã‚Šãªã•ã‚’æ„Ÿã˜ã¾ã—ãŸã€‚\nä¾é ¼äººã¯æº€è¶³ã—ã¦ã„ã¾ã—ãŸãŒã€ã‚ãªãŸã¯å†™çœŸã®äººç‰©ã«ã¤ã„ã¦ã‚‚ã£ã¨èª¿ã¹ãŸã‹ã£ãŸã®ã§ã™ã€‚\n(ã‚‚ã—ã‹ã—ãŸã‚‰ã€ã‚‚ã†ã²ã¨ã¤ã®æ‰‹ãŒã‹ã‚ŠãŒã‚ã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„...)',
            hint: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã‚‚ã‚‚å­ã•ã‚“ã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ‰‹ãŒã‹ã‚Šã‚’æ±‚ã‚ã¦ã„ã¾ã—ãŸã€‚å†™çœŸã®ã€Œäººç‰©ã€ã ã‘ã§ãªãã€ã€ŒèƒŒæ™¯ã€ã«ã‚‚æ³¨ç›®ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
          }
        }
      },
      {
        id: 2,
        title: 'ä¸æ€è­°ãªãƒ¬ã‚¹ãƒˆãƒ©ãƒ³',
        setup: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã¯ã€Œæœ¬æ—¥ã®ãŠã™ã™ã‚ã€ã¨ã€Œã‚·ã‚§ãƒ•ã®ãã¾ãã‚Œã€ãŒã‚ã‚Šã¾ã™ã€‚',
        choices: [
          { id: 1, text: 'æœ¬æ—¥ã®ãŠã™ã™ã‚ã‚’æ³¨æ–‡ã™ã‚‹', preview: 'ã‚·ã‚§ãƒ•ï¼šã€ŒãŠå¾…ãŸã›...' },
          { id: 2, text: 'ã‚·ã‚§ãƒ•ã®ãã¾ãã‚Œã‚’æ³¨æ–‡ã™ã‚‹', preview: 'ã‚·ã‚§ãƒ•ï¼šã€ŒãŠå¾…ãŸã›...' }
        ],
        branches: {
          1: {
            text: 'ã‚·ã‚§ãƒ•ï¼šã€ŒãŠå¾…ãŸã›ã—ã¾ã—ãŸã€\nç¾å‘³ã—ã„æ–™ç†ãŒé‹ã°ã‚Œã¦ããŸã€‚\nã‚·ã‚§ãƒ•ï¼šã€ŒãŠæ°—ã«å¬ã—ã¾ã—ãŸã‹?ã€\nç§ï¼šã€Œã¯ã„!ã€',
            hasWord: false,
            epilogue: 'æ–™ç†ã¯ç¾å‘³ã—ã‹ã£ãŸã§ã™ãŒã€ã‚·ã‚§ãƒ•ã®ã€Œãã¾ãã‚Œã€ãŒæ°—ã«ãªã‚Šã¾ã—ãŸã€‚\næ¬¡å›ã¯ã€ãã¾ãã‚Œãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚è©¦ã—ã¦ã¿ã‚ˆã†ã¨å¿ƒã«æ±ºã‚ã¾ã—ãŸã€‚\n(ã‚‚ã—ã‹ã—ãŸã‚‰ã€ã‚ã®ç©ºã®çš¿ã«ã¯ä½•ã‹æ„å‘³ãŒã‚ã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„...)',
            hint: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã†ã¿ã‚·ã‚§ãƒ•ã®ã€Œãã¾ãã‚Œã€ã«ã¯ç‰¹åˆ¥ãªæ„å‘³ãŒã‚ã‚Šã¾ã™ã€‚ç©ºã®çš¿ã®ã€Œè£ã€ã‚„ã€Œåº•ã€ã«æ³¨ç›®ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
          },
          2: {
            text: 'ã‚·ã‚§ãƒ•ï¼šã€ŒãŠå¾…ãŸã›ã—ã¾ã—ãŸã€\né‹ã°ã‚Œã¦ããŸã®ã¯ç©ºã®çš¿ã€‚\nç§ï¼šã€Œã‚ã®ãƒ»ãƒ»ãƒ»ã“ã‚Œã¯?ã€\nã‚·ã‚§ãƒ•ï¼šã«ã£ã“ã‚Šç¬‘ã£ã¦ã€Œä»Šæ—¥ã®ãã¾ãã‚Œã¯ã€æƒ³åƒã®æ–™ç†ã€ã§ã™ã€\nç§ï¼šã€Œãƒ»ãƒ»ãƒ»?ã€\nã‚·ã‚§ãƒ•ï¼šã€Œå†—è«‡ã§ã™ã€‚ã€ã‚‚ã†ã²ã¨ã¤ã€‘ãŠæŒã¡ã—ã¾ã™ã€\n\n(çš¿ã®åº•ã«ä½•ã‹ãŒåˆ»ã¾ã‚Œã¦ã„ãŸ...ã€Œã†ã€)',
            hasWord: true,
            epilogue: 'ã‚·ã‚§ãƒ•ã®ãƒ¦ãƒ¼ãƒ¢ã‚¢ã«ç¬‘ã„ãªãŒã‚‰ã€ã‚ãªãŸã¯ã“ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å¸¸é€£å®¢ã«ãªã‚Šã¾ã—ãŸã€‚\n(ã¾ãŸæ–‡å­—ã‚’æ‰‹ã«å…¥ã‚ŒãŸ...ã€Œã†ã€)',
            epilogue2: 'ã†ã¿ã‚·ã‚§ãƒ•ã¯ã€ã‚ãªãŸãŒçš¿ã®åº•ã®æ–‡å­—ã«æ°—ã¥ã„ãŸã“ã¨ã‚’å–œã‚“ã§ã„ã¾ã—ãŸã€‚\nã€Œã‚ˆãæ°—ã¥ã„ã¦ãã‚ŒãŸã‚ã­ã€‚ã‚ã‚Œã¯ç‰¹åˆ¥ãªãŠå®¢æ§˜ã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã®ã€\nã‚ãªãŸã¯ã€ã†ã¿ã‚·ã‚§ãƒ•ã®éŠã³å¿ƒã¨æ¸©ã‹ã•ã«ã€ã¾ã™ã¾ã™ã“ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãŒå¥½ãã«ãªã‚Šã¾ã—ãŸã€‚\nã€Œã¾ãŸæ¥ã¦ã­ã€ã¨ã€ã†ã¿ã‚·ã‚§ãƒ•ã¯æ‰‹ã‚’æŒ¯ã£ã¦è¦‹é€ã£ã¦ãã‚Œã¾ã—ãŸã€‚'
          }
        }
      },
      {
        id: 3,
        title: 'ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«',
        setup: '20å¹´å‰ã«åŸ‹ã‚ãŸã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã‚’æ˜ã‚Šèµ·ã“ã™æ—¥ãŒãã¾ã—ãŸã€‚',
        choices: [
          { id: 1, text: 'ä¸€äººã§é–‹ã‘ã‚‹', preview: 'ä¸­ã«ã¯æ‰‹ç´™ã¨å£Šã‚ŒãŸ...' },
          { id: 2, text: 'å¹¼é¦´æŸ“ã‚’å‘¼ã‚“ã§ä¸€ç·’ã«é–‹ã‘ã‚‹', preview: 'å‹ï¼šã€Œé–‹ã‘ã‚ˆã†!ã€...' }
        ],
        branches: {
          1: {
            text: 'ä¸­ã«ã¯æ‰‹ç´™ã¨å£Šã‚ŒãŸã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼ãŒå…¥ã£ã¦ã„ãŸã€‚\næ‰‹ç´™ï¼šã€Œæœªæ¥ã®åƒ•ã¸ã€‚å¤¢ã¯å¶ã£ãŸ?ã€\nèƒ¸ãŒç· ã‚ä»˜ã‘ã‚‰ã‚Œã‚‹ã€‚\n(ã‚ã„ã¤ã¨ä¸€ç·’ã«åŸ‹ã‚ãŸã®ã«ãƒ»ãƒ»ãƒ»)',
            hasWord: false,
            epilogue: 'ä¸€äººã§ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã‚’é–‹ã‘ãŸå¾Œã€å¾Œæ‚”ã®å¿µã«è¥²ã‚ã‚Œã¾ã—ãŸã€‚\nå¹¼é¦´æŸ“ã‚’å‘¼ã¹ã°è‰¯ã‹ã£ãŸ...ãã†æ€ã†ã¨ã€èƒ¸ãŒç—›ã¿ã¾ã—ãŸã€‚\n(ã‚‚ã—ã‹ã—ãŸã‚‰ã€ä¸€ç·’ã«é–‹ã‘ã¦ã„ã‚Œã°ã€é•ã†ä½•ã‹ãŒè¦‹ã¤ã‹ã£ãŸã‹ã‚‚ã—ã‚Œãªã„)',
            hint: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã²ã‚ã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ‰‹ç´™ã‚’å…¥ã‚Œã¦ã„ãŸã¨è¨€ã£ã¦ã„ã¾ã—ãŸã€‚ä¸€ç·’ã«é–‹ã‘ã‚‹ã“ã¨ã§ã€æ‰‹ç´™ã®ã€Œè£ã€ã«ä½•ã‹è¦‹ã¤ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚'
          },
          2: {
            text: 'å‹ï¼šã€Œé–‹ã‘ã‚ˆã†!ã€\nä¸­ã«ã¯æ‰‹ç´™ãŒäºŒé€šã€‚\nç§ï¼šã€Œã‚ã‚Œã€ä¸€é€šã—ã‹å…¥ã‚Œã¦ãªã„ã‚ˆã­?ã€\nå‹ï¼šãƒ‹ãƒ¤ãƒªã¨ç¬‘ã£ã¦ã€Œå®Ÿã¯åƒ•ã‚‚ã€ã‚‚ã†ã²ã¨ã¤ã€‘å…¥ã‚Œã¦ãŸã‚“ã ã€‚èª­ã‚“ã§ã¿ã¦ã€\næ‰‹ç´™ã«ã¯åŠ±ã¾ã—ã®è¨€è‘‰ãŒç¶´ã‚‰ã‚Œã¦ã„ãŸã€‚\n\n(æ‰‹ç´™ã®è£ã«å°ã•ãªæ–‡å­—ãŒ...ã€Œã²ã€)',
            hasWord: true,
            epilogue: 'å¹¼é¦´æŸ“ã¨ã®çµ†ã‚’å†ç¢ºèªã—ãŸã‚ãªãŸã¯ã€äºŒäººã§æ–°ã—ã„ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã‚’åŸ‹ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\n(3ã¤ç›®ã®æ–‡å­—ã‚’ç™ºè¦‹...ã€Œã²ã€)',
            epilogue2: 'æ–°ã—ã„ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã‚’åŸ‹ã‚ãŸå¾Œã€ã²ã‚ã¯ã€Œä»Šåº¦ã¯20å¹´å¾Œã€ã¾ãŸä¸€ç·’ã«é–‹ã‘ã‚ˆã†ã€ã¨è¨€ã„ã¾ã—ãŸã€‚\nã€Œç´„æŸã ã‚ˆã€ã¨ã€ã‚ãªãŸã¯ã²ã‚ã¨å°æŒ‡ã‚’çµ¡ã‚ã¾ã—ãŸã€‚\næ‰‹ç´™ã®è£ã«ã‚ã£ãŸæ–‡å­—ã€Œã²ã€ã¯ã€å‹æƒ…ã®è¨¼ã¨ã—ã¦ã€ã‚ãªãŸã®å¿ƒã«åˆ»ã¾ã‚Œã¾ã—ãŸã€‚\näºŒäººã¯ã€ã“ã‚Œã‹ã‚‰ã‚‚ãšã£ã¨å‹é”ã§ã„ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºä¿¡ã—ã¾ã—ãŸã€‚'
          }
        }
      },
      {
        id: 4,
        title: 'é­”æ³•å­¦æ ¡ã®è©¦é¨“',
        setup: 'è©¦é¨“å®˜ï¼šã€Œã‚¦ã‚µã‚®ã‚’å‡ºç¾ã•ã›ãªã•ã„ã€',
        choices: [
          { id: 1, text: 'å‘ªæ–‡ã‚’å”±ãˆã‚‹', preview: 'ãƒ‘ãƒƒ!ã‚¦ã‚µã‚®ãŒ2...' },
          { id: 2, text: 'å¸½å­ã‹ã‚‰å–ã‚Šå‡ºã™', preview: 'ã‚¹ãƒƒã¨å¸½å­ã‹ã‚‰ã‚¦ã‚µ...' }
        ],
        branches: {
          1: {
            text: 'ãƒ‘ãƒƒ!ã‚¦ã‚µã‚®ãŒ2ç¾½å‡ºç¾ã—ãŸã€‚\nè©¦é¨“å®˜ï¼šã€ŒãŠã‚„?ã€\nç§ï¼šã€Œã™ã¿ã¾ã›ã‚“ã€é­”åŠ›ãŒå¼·ã™ãã¦ãƒ»ãƒ»ãƒ»ã€\nè©¦é¨“å®˜ï¼šã€Œæ§‹ã„ã¾ã›ã‚“ã€‚ã§ã¯ã€ã‚‚ã†ã²ã¨ã¤ã€‘æ¶ˆã—ã¦ãã ã•ã„ã€\nç§ï¼šå†·ã‚„æ±—ã‚’ã‹ãã€‚\n\n(æ¶ˆãˆãŸã‚¦ã‚µã‚®ã®è·¡ã«æ–‡å­—ãŒæµ®ã‹ã‚“ã ...ã€Œã¨ã€)',
            hasWord: true,
            epilogue: 'ã‚ãªãŸã¯é­”æ³•ã¨æ‰‹å“ã®ä¸¡æ–¹ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã€èª°ã‚‚ãŒé©šãã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼ã«ãªã‚Šã¾ã—ãŸã€‚\n(4ã¤ç›®ã®æ–‡å­—ã‚’æ‰‹ã«å…¥ã‚ŒãŸ...ã€Œã¨ã€)',
            epilogue2: 'ã¨ãŠã‚‹è©¦é¨“å®˜ã¯ã€ã‚ãªãŸã®æ‰èƒ½ã‚’é«˜ãè©•ä¾¡ã—ã¦ãã‚Œã¾ã—ãŸã€‚\nã€Œé­”æ³•ã¨æ‰‹å“ã€ä¸¡æ–¹ã‚’ä½¿ãˆã‚‹ã®ã¯çã—ã„ã€‚å›ã¯ç‰¹åˆ¥ãªæ‰èƒ½ã‚’æŒã£ã¦ã„ã‚‹ã€\nã‚ãªãŸã¯ã€æ¶ˆãˆãŸã‚¦ã‚µã‚®ã®è·¡ã«æµ®ã‹ã‚“ã æ–‡å­—ã€Œã¨ã€ã‚’ã€é­”æ³•ã®è¨¼ã¨ã—ã¦å¤§åˆ‡ã«ã—ã¾ã—ãŸã€‚\nã€Œã“ã‚Œã‹ã‚‰ã‚‚ã€ã‚‚ã†ã²ã¨ã¤ã®å¯èƒ½æ€§ã‚’æ¢ã—ç¶šã‘ã¦ã»ã—ã„ã€ã¨ã€ã¨ãŠã‚‹è©¦é¨“å®˜ã¯è¨€ã„ã¾ã—ãŸã€‚'
          },
          2: {
            text: 'ã‚¹ãƒƒã¨å¸½å­ã‹ã‚‰ã‚¦ã‚µã‚®ã‚’å–ã‚Šå‡ºã—ãŸã€‚\nè©¦é¨“å®˜ï¼šã€Œå®Œç’§ã§ã™ã€‚åˆæ ¼ã€\nè©¦é¨“ãŒçµ‚ã‚ã£ã¦ã‹ã‚‰æ°—ã¥ã„ãŸã€‚\n(ã‚ã‚Œã€é­”æ³•ä½¿ã£ã¦ãªã„ã?)',
            hasWord: false,
            epilogue: 'è©¦é¨“ã«ã¯åˆæ ¼ã—ã¾ã—ãŸãŒã€æ‰‹å“ã§ã”ã¾ã‹ã—ãŸã“ã¨ã«ç½ªæ‚ªæ„Ÿã‚’è¦šãˆã¾ã—ãŸã€‚\næœ¬å½“ã®é­”æ³•ã‚’ç¿’å¾—ã™ã‚‹ãŸã‚ã€ã‚ãªãŸã¯å†ã³é­”æ³•å­¦æ ¡ã®é–€ã‚’å©ãã“ã¨ã«ã—ã¾ã—ãŸã€‚\n(ã‚‚ã—ã‹ã—ãŸã‚‰ã€å‘ªæ–‡ã‚’å”±ãˆã¦ã„ã‚Œã°ã€ä½•ã‹ç‰¹åˆ¥ãªã“ã¨ãŒèµ·ããŸã‹ã‚‚ã—ã‚Œãªã„)',
            hint: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã¨ãŠã‚‹è©¦é¨“å®˜ã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€æ¶ˆã™ã‚ˆã†æŒ‡ç¤ºã—ã¾ã—ãŸã€‚å‘ªæ–‡ã‚’å”±ãˆã¦ã€ã‚¦ã‚µã‚®ãŒã€Œã‚‚ã†ã²ã¨ã¤ã€å‡ºç¾ã—ãŸæ™‚ã€ä½•ã‹ç‰¹åˆ¥ãªã“ã¨ãŒèµ·ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚'
          }
        }
      },
      {
        id: 5,
        title: 'æœ€å¾Œã®ãƒ”ãƒ¼ã‚¹',
        setup: '1000ãƒ”ãƒ¼ã‚¹ã®ã‚¸ã‚°ã‚½ãƒ¼ãƒ‘ã‚ºãƒ«ãŒã‚ã¨1ãƒ”ãƒ¼ã‚¹ã§å®Œæˆã—ã¾ã™ã€‚',
        choices: [
          { id: 1, text: 'æœ€å¾Œã®ãƒ”ãƒ¼ã‚¹ã‚’ã¯ã‚ã‚‹', preview: 'ã‚«ãƒãƒƒã€‚å®Œæˆã—ãŸçµµã¯...' },
          { id: 2, text: 'å‘¨ã‚Šã‚’æ¢ã—ã¦ã¿ã‚‹', preview: 'åºŠã‚’é€™ã„ã¤ãã°ã£ã¦æ¢...' }
        ],
        branches: {
          1: {
            text: 'ã‚«ãƒãƒƒã€‚å®Œæˆã—ãŸçµµã¯ç¾ã—ã„æ˜Ÿç©ºã€‚\né”æˆæ„Ÿã«æº€ãŸã•ã‚Œã‚‹ã€‚\nãã®æ™‚ã€åºŠã«ä½•ã‹ãŒè½ã¡ã¦ã„ã‚‹ã®ã«æ°—ã¥ã„ãŸã€‚\n(ãˆãƒ»ãƒ»ãƒ»ã¾ã•ã‹)',
            hasWord: false,
            epilogue: 'ãƒ‘ã‚ºãƒ«ã¯å®Œæˆã—ã¾ã—ãŸãŒã€åºŠã«è½ã¡ã¦ã„ãŸã®ã¯åˆ¥ã®ãƒ”ãƒ¼ã‚¹ã§ã—ãŸã€‚\nã‚‚ã—ã‹ã—ãŸã‚‰ã€å‘¨ã‚Šã‚’ã‚‚ã£ã¨æ¢ã—ã¦ã„ã‚Œã°ã€æ‹äººã®ã‚µãƒ—ãƒ©ã‚¤ã‚ºã«æ°—ã¥ã‘ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\n(æ¬¡ã¯ã€ã‚‚ã£ã¨æ³¨æ„æ·±ãè¦³å¯Ÿã—ã‚ˆã†ã¨å¿ƒã«èª“ã„ã¾ã—ãŸ)',
            hint: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã¤ã°ã•ã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®ãƒ‘ã‚ºãƒ«ã‚’ç”¨æ„ã—ã¦ã„ã¾ã—ãŸã€‚å‘¨ã‚Šã‚’æ¢ã™ã“ã¨ã§ã€ã¤ã°ã•ã®ã‚µãƒ—ãƒ©ã‚¤ã‚ºã«æ°—ã¥ã‘ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ç®±ã®ã€Œè“‹ã®å†…å´ã€ã«ã‚‚æ³¨ç›®ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚'
          },
          2: {
            text: 'åºŠã‚’é€™ã„ã¤ãã°ã£ã¦æ¢ã™ã€‚è¦‹ã¤ã‹ã‚‰ãªã„ã€‚\næ‹äººï¼šã€Œæ¢ã—ç‰©?ã€\nç§ï¼šã€Œæœ€å¾Œã®ãƒ”ãƒ¼ã‚¹ãŒãƒ»ãƒ»ãƒ»ã€\næ‹äººï¼šãƒã‚±ãƒƒãƒˆã‹ã‚‰å–ã‚Šå‡ºã—ã¦ã€Œå®Ÿã¯ã€ã‚‚ã†ã²ã¨ã¤ã€‘è²·ã£ã¦ãŠã„ãŸã‚“ã ã€‚å›ãŒå®Œæˆã•ã›ãŸæ™‚ã®ãŸã‚ã«ã€\nç®±ã«ã¯åŒã˜ãƒ‘ã‚ºãƒ«ãŒå…¥ã£ã¦ã„ãŸã€‚\n\n(ç®±ã®è“‹ã®å†…å´ã«æ–‡å­—ãŒ...ã€Œã¤ã€)',
            hasWord: true,
            epilogue: 'æ‹äººã®å„ªã—ã•ã«æ„Ÿå‹•ã—ãŸã‚ãªãŸã¯ã€äºŒäººã§æ–°ã—ã„ãƒ‘ã‚ºãƒ«ã‚’å®Œæˆã•ã›ãªãŒã‚‰å¹¸ã›ãªæ™‚é–“ã‚’éã”ã—ã¾ã—ãŸã€‚\n(æœ€å¾Œã®æ–‡å­—ã‚’æ‰‹ã«å…¥ã‚ŒãŸ...ã€Œã¤ã€)',
            epilogue2: 'æ–°ã—ã„ãƒ‘ã‚ºãƒ«ã‚’å®Œæˆã•ã›ãŸå¾Œã€ã¤ã°ã•ã¯ã€Œå›ã®ãŸã‚ã«ã€ã„ã¤ã‚‚æº–å‚™ã—ã¦ã‚‹ã‚“ã ã‚ˆã€ã¨å¾®ç¬‘ã¿ã¾ã—ãŸã€‚\nç®±ã®è“‹ã®å†…å´ã«ã‚ã£ãŸæ–‡å­—ã€Œã¤ã€ã¯ã€ã¤ã°ã•ã®æ„›æƒ…ã®è¨¼ã§ã—ãŸã€‚\nã€Œã“ã‚Œã‹ã‚‰ã‚‚ã€ãšã£ã¨ä¸€ç·’ã«ãƒ‘ã‚ºãƒ«ã‚’å®Œæˆã•ã›ã‚ˆã†ã­ã€\nã‚ãªãŸã¯ã€ã¤ã°ã•ã®å„ªã—ã•ã«åŒ…ã¾ã‚ŒãªãŒã‚‰ã€å¹¸ã›ã‚’å™›ã¿ã—ã‚ã¾ã—ãŸã€‚'
          }
        }
      },
      {
        id: 6,
        title: 'çœŸå®Ÿã®æ‰‰',
        setup: '5ã¤ã®ã€Œã‚‚ã†ã²ã¨ã¤ã€ã‚’é›†ã‚ãŸã‚ãªãŸã®å‰ã«ã€å¤ã³ãŸæ‰‰ãŒç¾ã‚Œã¾ã—ãŸã€‚\næ‰‰ã«ã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€ã¨ã„ã†æ–‡å­—ãŒåˆ»ã¾ã‚Œã¦ã„ã¾ã™ã€‚\nè¬ã®å£°ãŒéŸ¿ãã¾ã™ï¼šã€Œãªãœã€ã‚ãªãŸã¯ã€ã‚‚ã†ã²ã¨ã¤ã€ã‚’æ¢ã—ç¶šã‘ãŸã®ã‹ï¼Ÿã€',
        choices: [
          { id: 1, text: 'ã€Œå¥½å¥‡å¿ƒã‹ã‚‰ã§ã™ã€ã¨ç­”ãˆã‚‹', preview: 'ç§ï¼šã€ŒãŸã ã€æ°—ã«ãªã£ãŸã ã‘...' },
          { id: 2, text: 'ã€Œç­”ãˆã‚’çŸ¥ã‚ŠãŸã‹ã£ãŸã‹ã‚‰ã§ã™ã€ã¨ç­”ãˆã‚‹', preview: 'å£°ï¼šã€Œã§ã¯ã€ãã®ç­”ãˆã‚’...' }
        ],
        branches: {
          1: {
            text: 'ç§ï¼šã€ŒãŸã ã€æ°—ã«ãªã£ãŸã ã‘ã§ã™ã€\nå£°ï¼šã€Œãªã‚‹ã»ã©...ã§ã¯ã€ãã®å¥½å¥‡å¿ƒãŒã‚ãªãŸã‚’ã“ã“ã¸å°ã„ãŸã®ã§ã™ã­ã€\næ‰‰ãŒã‚†ã£ãã‚Šã¨é–‹ãã€‚\nä¸­ã‹ã‚‰å…‰ãŒæº¢ã‚Œå‡ºã—ã€ã‚ãªãŸã®å‰ã«ç¾ã‚ŒãŸã®ã¯...\n\nå£°ï¼šã€Œå®Ÿã¯ã€ã€ã‚‚ã†ã²ã¨ã¤ã€ã‚’æ¢ã™ã“ã¨ã¯ã€äººç”Ÿã®ç¸®å›³ãªã®ã§ã™ã€\nã€Œã„ã¤ã‚‚ã€ã‚‚ã†ã²ã¨ã¤ã®é¸æŠè‚¢ã€ã‚‚ã†ã²ã¨ã¤ã®å¯èƒ½æ€§ã€ã‚‚ã†ã²ã¨ã¤ã®ç­”ãˆãŒã‚ã‚‹ã€\nã€Œãã‚Œã‚’æ¢ã—ç¶šã‘ã‚‹ã“ã¨ãŒã€æˆé•·ã¸ã®éµãªã®ã§ã™ã€\n\nã‚ãªãŸã¯æ·±ãé ·ã„ãŸã€‚',
            hasWord: false,
            epilogue: 'å¥½å¥‡å¿ƒã‹ã‚‰å§‹ã¾ã£ãŸæ—…è·¯ã§ã—ãŸãŒã€çœŸå®Ÿã®ä¸€éƒ¨ã—ã‹è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\nã‚‚ã—ã‹ã—ãŸã‚‰ã€ã€Œç­”ãˆã‚’çŸ¥ã‚ŠãŸã‹ã£ãŸã€ã¨ç­”ãˆã‚‹ã“ã¨ã§ã€ã‚‚ã£ã¨æ·±ã„çœŸå®Ÿã«è¾¿ã‚Šç€ã‘ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nãã‚Œã§ã‚‚ã€ã‚ãªãŸã¯ã€Œã‚‚ã†ã²ã¨ã¤ã€ã‚’æ¢ã—ç¶šã‘ã‚‹ã“ã¨ã®å¤§åˆ‡ã•ã‚’å­¦ã³ã¾ã—ãŸã€‚'
          },
          2: {
            text: 'å£°ï¼šã€Œã§ã¯ã€ãã®ç­”ãˆã‚’æ•™ãˆã¾ã—ã‚‡ã†ã€\næ‰‰ãŒå¤§ããé–‹ãã€‚\n\nå£°ï¼šã€Œã‚ãªãŸãŒé›†ã‚ãŸã‚‚ã®...ãã‚Œã¯ä½•ã ã£ãŸã‹è¦šãˆã¦ã„ã¾ã™ã‹?ã€\nã‚ãªãŸã¯æ‰‹ã‚’ä¼¸ã°ã™ã€‚é›†ã‚ãŸæ–‡å­—ãŒæµ®ã‹ã³ä¸ŠãŒã‚‹...\n\nã€Œã‚‚ã€ã€Œã†ã€ã€Œã²ã€ã€Œã¨ã€ã€Œã¤ã€\n\nå£°ï¼šã€Œãã†ã€ã€ã‚‚ã†ã²ã¨ã¤ã€ã§ã™ã€\nã€Œã‚ãªãŸã¯5ã¤ã®ç‰©èªã‚’é€šã˜ã¦ã€ã“ã®è¨€è‘‰ã‚’é›†ã‚ã¾ã—ãŸã€\nã€Œãªãœã€ã‚‚ã†ã²ã¨ã¤ã€ã‚’æ¢ã™å¿…è¦ãŒã‚ã£ãŸã®ã‹...ã€\nã€Œãã‚Œã¯ã€ã‚ãªãŸè‡ªèº«ãŒã€ã‚‚ã†ã²ã¨ã¤ã€ã®å­˜åœ¨ã ã‹ã‚‰ã§ã™ã€\nã€Œã“ã®ä¸–ç•Œã«ã¯ã€ã‚ãªãŸã¨ã„ã†ã€ã‚‚ã†ã²ã¨ã¤ã€ã®å¯èƒ½æ€§ãŒå¿…è¦ã ã£ãŸã€\nã€Œé¸æŠè‚¢ãŒ2ã¤ã‚ã‚‹æ™‚ã€å¸¸ã«ã€ã‚‚ã†ã²ã¨ã¤ã€ã®é“ã‚’æ¢ã™ã“ã¨ã€\nã€Œãã‚ŒãŒã€ã‚ãªãŸã‚’ç‰¹åˆ¥ãªå­˜åœ¨ã«ã™ã‚‹ã®ã§ã™ã€\n\nå…‰ã«åŒ…ã¾ã‚ŒãªãŒã‚‰ã€ã‚ãªãŸã¯å…¨ã¦ã‚’ç†è§£ã—ãŸã€‚\né›†ã‚ãŸæ–‡å­—ãŒã€Œã‚‚ã†ã²ã¨ã¤ã€ã¨ã„ã†è¨€è‘‰ã¨ã—ã¦è¼ã„ãŸã€‚\nãã—ã¦ã€æ‰‰ã®å‘ã“ã†ã«ã¯æ–°ã—ã„ä¸–ç•ŒãŒåºƒãŒã£ã¦ã„ãŸã€‚',
            hasWord: true,
            epilogue: 'ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®çœŸå®Ÿã‚’çŸ¥ã£ãŸã‚ãªãŸã¯ã€ã“ã‚Œã‹ã‚‰ã‚‚å¸¸ã«æ–°ã—ã„å¯èƒ½æ€§ã‚’æ¢ã—ç¶šã‘ã‚‹ã“ã¨ã‚’èª“ã„ã¾ã—ãŸã€‚\n\n(ã‚ãªãŸãŒé›†ã‚ãŸæ–‡å­—ã€Œã‚‚ã€ã€Œã†ã€ã€Œã²ã€ã€Œã¨ã€ã€Œã¤ã€ã¯ã€\nã€Œã‚‚ã†ã²ã¨ã¤ã€ã¨ã„ã†è¨€è‘‰ã¨ã—ã¦ã€ã‚ãªãŸã®å¿ƒã«åˆ»ã¾ã‚Œã¾ã—ãŸ)'
          }
        }
      }
    ];

    function MiniNovelGame() {
      const [currentScenario, setCurrentScenario] = useState(null);
      const [gameState, setGameState] = useState('selection');
      const [selectedChoice, setSelectedChoice] = useState(null);
      const [score, setScore] = useState(0);
      const [completedScenarios, setCompletedScenarios] = useState(new Set());
      const [scenarioResults, setScenarioResults] = useState({}); // å„ã‚·ãƒŠãƒªã‚ªã®çµæœã‚’ä¿å­˜ {scenarioId: {hasWord: bool, choiceId: number, epilogue: string}}
      const [collectedLetters, setCollectedLetters] = useState(new Set()); // é›†ã‚ãŸæ–‡å­—ã‚’ä¿å­˜
      const [showHint, setShowHint] = useState(false); // ãƒ’ãƒ³ãƒˆã®è¡¨ç¤º/éè¡¨ç¤º
      const [expandedProfiles, setExpandedProfiles] = useState(new Set()); // å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’å±•é–‹ã—ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«

      const handleScenarioSelect = (scenarioId) => {
        const scenarioIndex = scenarios.findIndex(s => s.id === scenarioId);
        setCurrentScenario(scenarioIndex);
        setGameState('setup');
        setSelectedChoice(null);
      };

      const handleChoice = (choiceId) => {
        setSelectedChoice(choiceId);
        const branch = scenarios[currentScenario].branches[choiceId];
        const scenarioId = scenarios[currentScenario].id;
        
        const epilogue = branch.epilogue || scenarios[currentScenario].epilogue;
        
        if (branch.hasWord) {
          const newScore = score + 1;
          setScore(newScore);
          setCompletedScenarios(new Set([...completedScenarios, scenarioId]));
          setScenarioResults({
            ...scenarioResults,
            [scenarioId]: { hasWord: true, choiceId: choiceId, epilogue: epilogue }
          });
          
          // æ–‡å­—ã‚’åé›†ï¼ˆã‚·ãƒŠãƒªã‚ª1-5ã®ã¿ï¼‰
          if (scenarioId <= 5) {
            const letters = ['ã‚‚', 'ã†', 'ã²', 'ã¨', 'ã¤'];
            const letterIndex = scenarioId - 1;
            if (letterIndex < letters.length) {
              setCollectedLetters(new Set([...collectedLetters, letters[letterIndex]]));
            }
          }
        } else {
          setScenarioResults({
            ...scenarioResults,
            [scenarioId]: { hasWord: false, choiceId: choiceId, epilogue: epilogue }
          });
        }
        
        setGameState('result');
      };

      const backToSelection = () => {
        setGameState('selection');
        setCurrentScenario(null);
        setSelectedChoice(null);
      };

      const reset = () => {
        setCurrentScenario(null);
        setGameState('selection');
        setSelectedChoice(null);
        setScore(0);
        setCompletedScenarios(new Set());
        setScenarioResults({});
        setCollectedLetters(new Set());
        setShowHint(false);
        setExpandedProfiles(new Set());
      };

      // é¸æŠç”»é¢
      if (gameState === 'selection') {
        const totalCompleted = completedScenarios.size;
        return (
          <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4">
            <div className="bg-white/90 backdrop-blur rounded-2xl shadow-2xl p-8 max-w-4xl w-full">
              <div className="text-center mb-8">
                <h1 className="text-4xl font-bold text-gray-800 mb-2">ãƒŸãƒ‹ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ </h1>
                <p className="text-lg text-gray-600 mb-4">
                  ã€ã‚‚ã†ã²ã¨ã¤ã€‘ãƒ¯ãƒ¼ãƒ‰ã‚²ãƒƒãƒˆæ•°: {score} / {scenarios.length}
                  {score > scenarios.length && <span className="text-red-500 font-bold ml-2">ï¼ˆãŠã‚„ï¼Ÿï¼‰</span>}
                </p>
                <p className="text-sm text-gray-500">ã‚·ãƒŠãƒªã‚ªã‚’é¸æŠã—ã¦ãã ã•ã„</p>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                {scenarios.map((scenario) => {
                  // 6ç•ªç›®ã®ã‚·ãƒŠãƒªã‚ªã¯æœ€åˆã®5ã¤ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¾ã§è¡¨ç¤ºã—ãªã„
                  const firstFiveCompleted = scenarios.filter(s => s.id <= 5).every(s => completedScenarios.has(s.id));
                  if (scenario.id === 6 && !firstFiveCompleted) {
                    return null;
                  }
                  
                  const isCompleted = completedScenarios.has(scenario.id);
                  const result = scenarioResults[scenario.id];
                  const isLocked = scenario.id === 6 && !firstFiveCompleted;
                  
                  return (
                    <button
                      key={scenario.id}
                      onClick={() => !isLocked && handleScenarioSelect(scenario.id)}
                      disabled={isLocked}
                      className={`relative p-6 rounded-lg transition-all transform hover:scale-105 text-left ${
                        isLocked
                          ? 'bg-gray-400 cursor-not-allowed opacity-50'
                          : isCompleted
                          ? 'bg-gradient-to-br from-green-500 to-emerald-600 text-white'
                          : 'bg-gradient-to-br from-purple-500 to-blue-500 text-white hover:from-purple-600 hover:to-blue-600'
                      }`}
                    >
                      <div className="font-bold text-xl mb-2">
                        {scenario.title}
                        {scenario.id === 6 && firstFiveCompleted && (
                          <span className="ml-2 text-yellow-300 text-sm">âœ¨ æ–°è¦è¿½åŠ </span>
                        )}
                      </div>
                      <div className="text-sm opacity-90 line-clamp-2">
                        {isLocked ? 'æœ€åˆã®5ã¤ã®ã‚·ãƒŠãƒªã‚ªã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨å‡ºç¾ã—ã¾ã™' : scenario.setup}
                      </div>
                      {isCompleted && (
                        <div className="absolute top-2 right-2">
                          <Award className="w-6 h-6 text-yellow-300" />
                        </div>
                      )}
                      {result && !result.hasWord && (
                        <div className="absolute top-2 right-2">
                          <span className="text-xs bg-white/30 px-2 py-1 rounded">æœªç²å¾—</span>
                        </div>
                      )}
                      {isLocked && (
                        <div className="absolute top-2 right-2">
                          <span className="text-xs bg-white/30 px-2 py-1 rounded">ğŸ”’ ãƒ­ãƒƒã‚¯</span>
                        </div>
                      )}
                    </button>
                  );
                })}
              </div>

              {totalCompleted === scenarios.length && (
                <div className="mt-8 text-center">
                  <div className="bg-yellow-100 border-2 border-yellow-500 rounded-lg p-4 inline-block">
                    <p className="text-yellow-800 font-bold text-lg">
                      ğŸ‰ å…¨ã‚·ãƒŠãƒªã‚ªã‚¯ãƒªã‚¢ï¼ ğŸ‰
                    </p>
                  </div>
                </div>
              )}
              
              {scenarios.filter(s => s.id <= 5).every(s => completedScenarios.has(s.id)) && !completedScenarios.has(6) && (
                <div className="mt-8 text-center">
                  <div className="bg-purple-100 border-2 border-purple-500 rounded-lg p-4 inline-block animate-pulse">
                    <p className="text-purple-800 font-bold text-lg">
                      âœ¨ æ–°ã—ã„ã‚·ãƒŠãƒªã‚ªãŒå‡ºç¾ã—ã¾ã—ãŸï¼ âœ¨
                    </p>
                  </div>
                </div>
              )}

              {/* ç™»å ´äººç‰©ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« */}
              <div className="mt-12 pt-8 border-t-2 border-gray-300">
                <h2 className="text-2xl font-bold text-gray-800 mb-6 text-center">ç™»å ´äººç‰©ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                  {/* ã‚·ãƒŠãƒªã‚ª1: ã‚‚ */}
                  {(() => {
                    const isUnlocked = scenarioResults[1] !== undefined;
                    const result = scenarioResults[1];
                    const scenario = scenarios.find(s => s.id === 1);
                    const isExpanded = expandedProfiles.has(1);
                    return (
                      <div className={`bg-gradient-to-br from-pink-50 to-rose-50 rounded-lg p-4 border-2 ${isUnlocked ? 'border-pink-200' : 'border-gray-300'} relative ${!isUnlocked ? 'opacity-60' : ''}`}>
                        {!isUnlocked && (
                          <div className="absolute inset-0 bg-gray-200 bg-opacity-50 rounded-lg flex items-center justify-center backdrop-blur-sm">
                            <span className="text-gray-500 font-bold text-lg">???</span>
                          </div>
                        )}
                        <h3 className="font-bold text-lg text-gray-800 mb-2">
                          {isUnlocked ? 'ç”°ä¸­ ã‚‚ã‚‚å­ï¼ˆä¾é ¼äººï¼‰' : '???ï¼ˆä¾é ¼äººï¼‰'}
                        </h3>
                        {isUnlocked ? (
                          <>
                            <p className="text-sm text-gray-700 mb-2">
                              <span className="font-semibold">è·æ¥­:</span> ä¼šç¤¾å“¡<br/>
                              <span className="font-semibold">ç‰¹å¾´:</span> 10å¹´å‰ã«å¤±è¸ªã—ãŸäººç‰©ã®å†™çœŸã‚’æŒå‚ã€‚æ¢åµã«ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ‰‹ãŒã‹ã‚Šã‚’æ±‚ã‚ã¦ã„ã‚‹ã€‚å†™çœŸã®éš…ã«ä½•ã‹éš ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
                              {scenarioResults[6] && (
                                <><br/><br/><span className="font-semibold text-pink-700">è¬ã®å£°ã¨ã®é–¢ä¿‚:</span> ã‚‚ã‚‚å­ã•ã‚“ãŒæ¢ã—ã¦ã„ãŸã€Œã‚‚ã†ã²ã¨ã¤ã€ã¯ã€å®Ÿã¯è¬ã®å£°ãŒå°ã„ãŸé“æ¨™ã§ã—ãŸã€‚è¬ã®å£°ã¯ã€ã‚‚ã‚‚å­ã•ã‚“ã«çœŸå®Ÿã‚’è¦‹ã¤ã‘ã‚‹åŠ›ã‚’ä¸ãˆãŸå­˜åœ¨ã§ã™ã€‚
                                </>)}
                            </p>
                            <p className="text-xs text-pink-600 italic mb-3">ã€Œã‚‚ã£ã¨æ·±ãèª¿ã¹ã¦ã»ã—ã„ã®...ã€</p>
                            {result && (
                              <>
                                <div className="mt-3 pt-3 border-t border-pink-200">
                                  <p className="text-xs font-semibold text-pink-700 mb-1">å¾Œæ—¥è«‡</p>
                                  <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                                </div>
                                {result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].epilogue2 && (
                                  <>
                                    <button
                                      onClick={() => {
                                        const newExpanded = new Set(expandedProfiles);
                                        if (isExpanded) {
                                          newExpanded.delete(1);
                                        } else {
                                          newExpanded.add(1);
                                        }
                                        setExpandedProfiles(newExpanded);
                                      }}
                                      className="mt-2 text-xs text-pink-600 hover:text-pink-800 underline"
                                    >
                                      {isExpanded ? 'â–¼ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’éš ã™' : 'â–¶ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’è¦‹ã‚‹'}
                                    </button>
                                    {isExpanded && (
                                      <div className="mt-2 pt-2 border-t border-pink-100">
                                        <p className="text-xs font-semibold text-pink-600 mb-1">å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡</p>
                                        <p className="text-xs text-gray-600 whitespace-pre-line">{scenario.branches[result.choiceId].epilogue2}</p>
                                      </div>
                                    )}
                                  </>
                                )}
                                {!result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].hint && (
                                  <div className="mt-3 pt-3 border-t border-pink-200 bg-pink-50 rounded p-2">
                                    <p className="text-xs text-pink-700 whitespace-pre-line">{scenario.branches[result.choiceId].hint}</p>
                                  </div>
                                )}
                              </>
                            )}
                          </>
                        ) : (
                          <p className="text-sm text-gray-500 italic">ã‚·ãƒŠãƒªã‚ªã€Œè¬ã®ä¾é ¼ã€ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        )}
                      </div>
                    );
                  })()}

                  {/* ã‚·ãƒŠãƒªã‚ª2: ã† */}
                  {(() => {
                    const isUnlocked = scenarioResults[2] !== undefined;
                    const result = scenarioResults[2];
                    const scenario = scenarios.find(s => s.id === 2);
                    const isExpanded = expandedProfiles.has(2);
                    return (
                      <div className={`bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-4 border-2 ${isUnlocked ? 'border-blue-200' : 'border-gray-300'} relative ${!isUnlocked ? 'opacity-60' : ''}`}>
                        {!isUnlocked && (
                          <div className="absolute inset-0 bg-gray-200 bg-opacity-50 rounded-lg flex items-center justify-center backdrop-blur-sm">
                            <span className="text-gray-500 font-bold text-lg">???</span>
                          </div>
                        )}
                        <h3 className="font-bold text-lg text-gray-800 mb-2">
                          {isUnlocked ? 'æµ·åŸ ã†ã¿ï¼ˆã‚·ã‚§ãƒ•ï¼‰' : '???ï¼ˆã‚·ã‚§ãƒ•ï¼‰'}
                        </h3>
                        {isUnlocked ? (
                          <>
                            <p className="text-sm text-gray-700 mb-2">
                              <span className="font-semibold">è·æ¥­:</span> ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚·ã‚§ãƒ•<br/>
                              <span className="font-semibold">ç‰¹å¾´:</span> ãƒ¦ãƒ¼ãƒ¢ã‚¢å¥½ãã§ã€æ™‚ã€…ã€Œãã¾ãã‚Œã€ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æä¾›ã€‚ç©ºã®çš¿ã‚’å‡ºã™ã“ã¨ã‚‚ã‚ã‚‹ãŒã€ãã®è£ã«ã¯ä½•ã‹æ„å‘³ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
                              {scenarioResults[6] && (
                                <><br/><br/><span className="font-semibold text-blue-700">è¬ã®å£°ã¨ã®é–¢ä¿‚:</span> ã†ã¿ã‚·ã‚§ãƒ•ã®ã€Œãã¾ãã‚Œã€ã¯ã€è¬ã®å£°ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã—ãŸã€‚è¬ã®å£°ã¯ã€ã†ã¿ã‚·ã‚§ãƒ•ã‚’é€šã˜ã¦ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ¥½ã—ã¿ã‚’ä¼ãˆã‚ˆã†ã¨ã—ã¦ã„ãŸã®ã§ã™ã€‚
                                </>)}
                            </p>
                            <p className="text-xs text-blue-600 italic mb-3">ã€ŒãŠå®¢æ§˜ã«ã¯ã€ã‚‚ã†ã²ã¨ã¤ã®æ¥½ã—ã¿ã‚’...ã€</p>
                            {result && (
                              <>
                                <div className="mt-3 pt-3 border-t border-blue-200">
                                  <p className="text-xs font-semibold text-blue-700 mb-1">å¾Œæ—¥è«‡</p>
                                  <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                                </div>
                                {result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].epilogue2 && (
                                  <>
                                    <button
                                      onClick={() => {
                                        const newExpanded = new Set(expandedProfiles);
                                        if (isExpanded) {
                                          newExpanded.delete(2);
                                        } else {
                                          newExpanded.add(2);
                                        }
                                        setExpandedProfiles(newExpanded);
                                      }}
                                      className="mt-2 text-xs text-blue-600 hover:text-blue-800 underline"
                                    >
                                      {isExpanded ? 'â–¼ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’éš ã™' : 'â–¶ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’è¦‹ã‚‹'}
                                    </button>
                                    {isExpanded && (
                                      <div className="mt-2 pt-2 border-t border-blue-100">
                                        <p className="text-xs font-semibold text-blue-600 mb-1">å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡</p>
                                        <p className="text-xs text-gray-600 whitespace-pre-line">{scenario.branches[result.choiceId].epilogue2}</p>
                                      </div>
                                    )}
                                  </>
                                )}
                                {!result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].hint && (
                                  <div className="mt-3 pt-3 border-t border-blue-200 bg-blue-50 rounded p-2">
                                    <p className="text-xs text-blue-700 whitespace-pre-line">{scenario.branches[result.choiceId].hint}</p>
                                  </div>
                                )}
                              </>
                            )}
                          </>
                        ) : (
                          <p className="text-sm text-gray-500 italic">ã‚·ãƒŠãƒªã‚ªã€Œä¸æ€è­°ãªãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã€ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        )}
                      </div>
                    );
                  })()}

                  {/* ã‚·ãƒŠãƒªã‚ª3: ã² */}
                  {(() => {
                    const isUnlocked = scenarioResults[3] !== undefined;
                    const result = scenarioResults[3];
                    const scenario = scenarios.find(s => s.id === 3);
                    const isExpanded = expandedProfiles.has(3);
                    return (
                      <div className={`bg-gradient-to-br from-yellow-50 to-amber-50 rounded-lg p-4 border-2 ${isUnlocked ? 'border-yellow-200' : 'border-gray-300'} relative ${!isUnlocked ? 'opacity-60' : ''}`}>
                        {!isUnlocked && (
                          <div className="absolute inset-0 bg-gray-200 bg-opacity-50 rounded-lg flex items-center justify-center backdrop-blur-sm">
                            <span className="text-gray-500 font-bold text-lg">???</span>
                          </div>
                        )}
                        <h3 className="font-bold text-lg text-gray-800 mb-2">
                          {isUnlocked ? 'åºƒç€¬ ã²ã‚ï¼ˆå¹¼é¦´æŸ“ï¼‰' : '???ï¼ˆå¹¼é¦´æŸ“ï¼‰'}
                        </h3>
                        {isUnlocked ? (
                          <>
                            <p className="text-sm text-gray-700 mb-2">
                              <span className="font-semibold">è·æ¥­:</span> ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹<br/>
                              <span className="font-semibold">ç‰¹å¾´:</span> 20å¹´å‰ã«ä¸€ç·’ã«ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã‚’åŸ‹ã‚ãŸè¦ªå‹ã€‚å®Ÿã¯ã€ã‚ãªãŸãŒçŸ¥ã‚‰ãªã„ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ‰‹ç´™ã‚’å…¥ã‚Œã¦ã„ãŸã€‚æ‰‹ç´™ã®è£ã«ã¯ä½•ã‹æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
                              {scenarioResults[6] && (
                                <><br/><br/><span className="font-semibold text-yellow-700">è¬ã®å£°ã¨ã®é–¢ä¿‚:</span> ã²ã‚ãŒã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã«å…¥ã‚ŒãŸã€Œã‚‚ã†ã²ã¨ã¤ã€ã®æ‰‹ç´™ã¯ã€è¬ã®å£°ã‹ã‚‰ã®å°ãã§ã—ãŸã€‚è¬ã®å£°ã¯ã€å‹æƒ…ã‚’é€šã˜ã¦ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®ä¾¡å€¤ã‚’æ•™ãˆã¦ãã‚ŒãŸå­˜åœ¨ã§ã™ã€‚
                                </>)}
                            </p>
                            <p className="text-xs text-yellow-600 italic mb-3">ã€Œå®Ÿã¯ã€ã‚‚ã†ã²ã¨ã¤ç§˜å¯†ãŒã‚ã‚‹ã‚“ã ...ã€</p>
                            {result && (
                              <>
                                <div className="mt-3 pt-3 border-t border-yellow-200">
                                  <p className="text-xs font-semibold text-yellow-700 mb-1">å¾Œæ—¥è«‡</p>
                                  <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                                </div>
                                {result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].epilogue2 && (
                                  <>
                                    <button
                                      onClick={() => {
                                        const newExpanded = new Set(expandedProfiles);
                                        if (isExpanded) {
                                          newExpanded.delete(3);
                                        } else {
                                          newExpanded.add(3);
                                        }
                                        setExpandedProfiles(newExpanded);
                                      }}
                                      className="mt-2 text-xs text-yellow-600 hover:text-yellow-800 underline"
                                    >
                                      {isExpanded ? 'â–¼ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’éš ã™' : 'â–¶ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’è¦‹ã‚‹'}
                                    </button>
                                    {isExpanded && (
                                      <div className="mt-2 pt-2 border-t border-yellow-100">
                                        <p className="text-xs font-semibold text-yellow-600 mb-1">å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡</p>
                                        <p className="text-xs text-gray-600 whitespace-pre-line">{scenario.branches[result.choiceId].epilogue2}</p>
                                      </div>
                                    )}
                                  </>
                                )}
                                {!result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].hint && (
                                  <div className="mt-3 pt-3 border-t border-yellow-200 bg-yellow-50 rounded p-2">
                                    <p className="text-xs text-yellow-700 whitespace-pre-line">{scenario.branches[result.choiceId].hint}</p>
                                  </div>
                                )}
                              </>
                            )}
                          </>
                        ) : (
                          <p className="text-sm text-gray-500 italic">ã‚·ãƒŠãƒªã‚ªã€Œã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ã€ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        )}
                      </div>
                    );
                  })()}

                  {/* ã‚·ãƒŠãƒªã‚ª4: ã¨ */}
                  {(() => {
                    const isUnlocked = scenarioResults[4] !== undefined;
                    const result = scenarioResults[4];
                    const scenario = scenarios.find(s => s.id === 4);
                    const isExpanded = expandedProfiles.has(4);
                    return (
                      <div className={`bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg p-4 border-2 ${isUnlocked ? 'border-purple-200' : 'border-gray-300'} relative ${!isUnlocked ? 'opacity-60' : ''}`}>
                        {!isUnlocked && (
                          <div className="absolute inset-0 bg-gray-200 bg-opacity-50 rounded-lg flex items-center justify-center backdrop-blur-sm">
                            <span className="text-gray-500 font-bold text-lg">???</span>
                          </div>
                        )}
                        <h3 className="font-bold text-lg text-gray-800 mb-2">
                          {isUnlocked ? 'é è—¤ ã¨ãŠã‚‹ï¼ˆè©¦é¨“å®˜ï¼‰' : '???ï¼ˆè©¦é¨“å®˜ï¼‰'}
                        </h3>
                        {isUnlocked ? (
                          <>
                            <p className="text-sm text-gray-700 mb-2">
                              <span className="font-semibold">è·æ¥­:</span> é­”æ³•å­¦æ ¡ã®è©¦é¨“å®˜<br/>
                              <span className="font-semibold">ç‰¹å¾´:</span> å³æ ¼ã ãŒã€äºˆæƒ³å¤–ã®çµæœã«ã‚‚æŸ”è»Ÿã«å¯¾å¿œã™ã‚‹ã€‚ã‚¦ã‚µã‚®ãŒ2ç¾½å‡ºç¾ã—ãŸæ™‚ã€ã€Œã‚‚ã†ã²ã¨ã¤ã€æ¶ˆã™ã‚ˆã†æŒ‡ç¤ºã€‚æ¶ˆãˆãŸè·¡ã«ã¯ä½•ã‹ãŒæ®‹ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
                              {scenarioResults[6] && (
                                <><br/><br/><span className="font-semibold text-purple-700">è¬ã®å£°ã¨ã®é–¢ä¿‚:</span> ã¨ãŠã‚‹è©¦é¨“å®˜ã®ã€Œã‚‚ã†ã²ã¨ã¤ã€ã¨ã„ã†æŒ‡ç¤ºã¯ã€è¬ã®å£°ã‹ã‚‰ã®è©¦ç·´ã§ã—ãŸã€‚è¬ã®å£°ã¯ã€ã¨ãŠã‚‹è©¦é¨“å®˜ã‚’é€šã˜ã¦ã€æˆé•·ã®ãŸã‚ã®ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®é“ã‚’ç¤ºã—ã¦ã„ãŸã®ã§ã™ã€‚
                                </>)}
                            </p>
                            <p className="text-xs text-purple-600 italic mb-3">ã€Œã‚‚ã†ã²ã¨ã¤ã€è©¦ã—ã¦ã¿ãªã•ã„ã€</p>
                            {result && (
                              <>
                                <div className="mt-3 pt-3 border-t border-purple-200">
                                  <p className="text-xs font-semibold text-purple-700 mb-1">å¾Œæ—¥è«‡</p>
                                  <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                                </div>
                                {result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].epilogue2 && (
                                  <>
                                    <button
                                      onClick={() => {
                                        const newExpanded = new Set(expandedProfiles);
                                        if (isExpanded) {
                                          newExpanded.delete(4);
                                        } else {
                                          newExpanded.add(4);
                                        }
                                        setExpandedProfiles(newExpanded);
                                      }}
                                      className="mt-2 text-xs text-purple-600 hover:text-purple-800 underline"
                                    >
                                      {isExpanded ? 'â–¼ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’éš ã™' : 'â–¶ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’è¦‹ã‚‹'}
                                    </button>
                                    {isExpanded && (
                                      <div className="mt-2 pt-2 border-t border-purple-100">
                                        <p className="text-xs font-semibold text-purple-600 mb-1">å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡</p>
                                        <p className="text-xs text-gray-600 whitespace-pre-line">{scenario.branches[result.choiceId].epilogue2}</p>
                                      </div>
                                    )}
                                  </>
                                )}
                                {!result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].hint && (
                                  <div className="mt-3 pt-3 border-t border-purple-200 bg-purple-50 rounded p-2">
                                    <p className="text-xs text-purple-700 whitespace-pre-line">{scenario.branches[result.choiceId].hint}</p>
                                  </div>
                                )}
                              </>
                            )}
                          </>
                        ) : (
                          <p className="text-sm text-gray-500 italic">ã‚·ãƒŠãƒªã‚ªã€Œé­”æ³•å­¦æ ¡ã®è©¦é¨“ã€ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        )}
                      </div>
                    );
                  })()}

                  {/* ã‚·ãƒŠãƒªã‚ª5: ã¤ */}
                  {(() => {
                    const isUnlocked = scenarioResults[5] !== undefined;
                    const result = scenarioResults[5];
                    const scenario = scenarios.find(s => s.id === 5);
                    const isExpanded = expandedProfiles.has(5);
                    return (
                      <div className={`bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border-2 ${isUnlocked ? 'border-green-200' : 'border-gray-300'} relative ${!isUnlocked ? 'opacity-60' : ''}`}>
                        {!isUnlocked && (
                          <div className="absolute inset-0 bg-gray-200 bg-opacity-50 rounded-lg flex items-center justify-center backdrop-blur-sm">
                            <span className="text-gray-500 font-bold text-lg">???</span>
                          </div>
                        )}
                        <h3 className="font-bold text-lg text-gray-800 mb-2">
                          {isUnlocked ? 'æœˆå³¶ ã¤ã°ã•ï¼ˆæ‹äººï¼‰' : '???ï¼ˆæ‹äººï¼‰'}
                        </h3>
                        {isUnlocked ? (
                          <>
                            <p className="text-sm text-gray-700 mb-2">
                              <span className="font-semibold">è·æ¥­:</span> ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼<br/>
                              <span className="font-semibold">ç‰¹å¾´:</span> å„ªã—ãæ°—é…ã‚Šä¸Šæ‰‹ã€‚ãƒ‘ã‚ºãƒ«ãŒå®Œæˆã™ã‚‹ã“ã¨ã‚’è¦‹è¶Šã—ã¦ã€ã€Œã‚‚ã†ã²ã¨ã¤ã€ã®ãƒ‘ã‚ºãƒ«ã‚’ç”¨æ„ã—ã¦ã„ãŸã€‚ç®±ã®è“‹ã®å†…å´ã«ä½•ã‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
                              {scenarioResults[6] && (
                                <><br/><br/><span className="font-semibold text-green-700">è¬ã®å£°ã¨ã®é–¢ä¿‚:</span> ã¤ã°ã•ãŒç”¨æ„ã—ãŸã€Œã‚‚ã†ã²ã¨ã¤ã€ã®ãƒ‘ã‚ºãƒ«ã¯ã€è¬ã®å£°ã‹ã‚‰ã®è´ˆã‚Šç‰©ã§ã—ãŸã€‚è¬ã®å£°ã¯ã€ã¤ã°ã•ã‚’é€šã˜ã¦ã€æ„›ã¨æ°—é…ã‚Šã®ã€Œã‚‚ã†ã²ã¨ã¤ã€ã‚’æ•™ãˆã¦ãã‚ŒãŸå­˜åœ¨ã§ã™ã€‚
                                </>)}
                            </p>
                            <p className="text-xs text-green-600 italic mb-3">ã€Œå›ã®ãŸã‚ã«ã€ã‚‚ã†ã²ã¨ã¤æº–å‚™ã—ã¦ãŸã‚“ã ã€</p>
                            {result && (
                              <>
                                <div className="mt-3 pt-3 border-t border-green-200">
                                  <p className="text-xs font-semibold text-green-700 mb-1">å¾Œæ—¥è«‡</p>
                                  <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                                </div>
                                {result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].epilogue2 && (
                                  <>
                                    <button
                                      onClick={() => {
                                        const newExpanded = new Set(expandedProfiles);
                                        if (isExpanded) {
                                          newExpanded.delete(5);
                                        } else {
                                          newExpanded.add(5);
                                        }
                                        setExpandedProfiles(newExpanded);
                                      }}
                                      className="mt-2 text-xs text-green-600 hover:text-green-800 underline"
                                    >
                                      {isExpanded ? 'â–¼ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’éš ã™' : 'â–¶ å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡ã‚’è¦‹ã‚‹'}
                                    </button>
                                    {isExpanded && (
                                      <div className="mt-2 pt-2 border-t border-green-100">
                                        <p className="text-xs font-semibold text-green-600 mb-1">å¾Œæ—¥è«‡ã®å¾Œæ—¥è«‡</p>
                                        <p className="text-xs text-gray-600 whitespace-pre-line">{scenario.branches[result.choiceId].epilogue2}</p>
                                      </div>
                                    )}
                                  </>
                                )}
                                {!result.hasWord && scenario && scenario.branches[result.choiceId] && scenario.branches[result.choiceId].hint && (
                                  <div className="mt-3 pt-3 border-t border-green-200 bg-green-50 rounded p-2">
                                    <p className="text-xs text-green-700 whitespace-pre-line">{scenario.branches[result.choiceId].hint}</p>
                                  </div>
                                )}
                              </>
                            )}
                          </>
                        ) : (
                          <p className="text-sm text-gray-500 italic">ã‚·ãƒŠãƒªã‚ªã€Œæœ€å¾Œã®ãƒ”ãƒ¼ã‚¹ã€ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                        )}
                      </div>
                    );
                  })()}

                  {/* è¬ã®å£°ï¼ˆçœŸå®Ÿã®æ‰‰ã‚¯ãƒªã‚¢å¾Œï¼‰ */}
                  {(() => {
                    const isUnlocked = scenarioResults[6] !== undefined;
                    const result = scenarioResults[6];
                    if (!isUnlocked) return null;
                    
                    return (
                      <div className="bg-gradient-to-br from-indigo-50 to-violet-50 rounded-lg p-4 border-2 border-indigo-200">
                        <h3 className="font-bold text-lg text-gray-800 mb-2">è¬ã®å£°</h3>
                        <p className="text-sm text-gray-700 mb-2">
                          <span className="font-semibold">æ­£ä½“:</span> çœŸå®Ÿã®æ‰‰ã®å®ˆè­·è€…<br/>
                          <span className="font-semibold">ç‰¹å¾´:</span> 5ã¤ã®ã€Œã‚‚ã†ã²ã¨ã¤ã€ã‚’é›†ã‚ãŸè€…ã«ã€çœŸå®Ÿã‚’ä¼ãˆã‚‹å­˜åœ¨ã€‚ã™ã¹ã¦ã®ç™»å ´äººç‰©ã¨ã®é–“ã«æ·±ã„ç¹‹ãŒã‚ŠãŒã‚ã‚‹ã€‚
                        </p>
                        {result && (
                          <>
                            <div className="mt-3 pt-3 border-t border-indigo-200">
                              <p className="text-xs font-semibold text-indigo-700 mb-1">å¾Œæ—¥è«‡</p>
                              <p className="text-xs text-gray-600 whitespace-pre-line">{result.epilogue}</p>
                            </div>
                          </>
                        )}
                      </div>
                    );
                  })()}
                </div>
                
                <div className="mt-6 text-center">
                  <button
                    onClick={() => setShowHint(!showHint)}
                    className="text-sm text-gray-500 hover:text-gray-700 underline italic transition-colors"
                  >
                    {showHint ? 'â–¼ ãƒ’ãƒ³ãƒˆã‚’éš ã™' : 'â–² ä½•ã‹è¦‹ãˆãã†ãªæ°—ãŒã™ã‚‹...'}
                  </button>
                  {showHint && (
                    <div className="mt-4 p-4 bg-gray-100 rounded-lg border-l-4 border-gray-400">
                      <p className="text-sm text-gray-700">
                        <span className="font-semibold">ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</span> å„ç™»å ´äººç‰©ã®åå‰ã«ã¯ã€ç‰¹åˆ¥ãªæ–‡å­—ãŒéš ã•ã‚Œã¦ã„ã¾ã™ã€‚
                        ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ã‚ˆãèª­ã‚€ã¨ã€ã©ã“ã«ã€Œã‚‚ã†ã²ã¨ã¤ã€ãŒã‚ã‚‹ã‹åˆ†ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“...
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      // ã‚·ãƒŠãƒªã‚ªãƒ—ãƒ¬ã‚¤ä¸­
      const scenario = scenarios[currentScenario];

      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4">
          <div className="bg-white/90 backdrop-blur rounded-2xl shadow-2xl p-8 max-w-2xl w-full">
            <div className="flex justify-between items-center mb-6">
              <h1 className="text-2xl font-bold text-gray-800">
                {scenario.title}
              </h1>
              <div className="flex items-center gap-4">
                <div className="text-sm text-gray-600">
                  ã‚¹ã‚³ã‚¢: {score} / {scenarios.length}
                  {score > scenarios.length && <span className="text-red-500 font-bold ml-1">ï¼ˆãŠã‚„ï¼Ÿï¼‰</span>}
                </div>
                <button
                  onClick={backToSelection}
                  className="text-sm text-purple-600 hover:text-purple-800 underline"
                >
                  é¸æŠç”»é¢ã«æˆ»ã‚‹
                </button>
              </div>
            </div>

            {gameState === 'setup' && (
              <div className="space-y-6">
                <p className="text-lg text-gray-700 whitespace-pre-line leading-relaxed">
                  {scenario.setup}
                </p>
                <div className="space-y-3">
                  {scenario.choices.map((choice) => (
                    <button
                      key={choice.id}
                      onClick={() => handleChoice(choice.id)}
                      className="w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-medium py-4 px-6 rounded-lg transition-all transform hover:scale-105 text-left"
                    >
                      <div className="font-bold mb-1">é¸æŠè‚¢{choice.id}ï¼š{choice.text}</div>
                      <div className="text-sm text-purple-100 opacity-80">
                        {choice.preview}
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            )}

            {gameState === 'result' && (
              <div className="space-y-6">
                <div className="bg-gray-50 rounded-lg p-6">
                  <p className="text-gray-700 whitespace-pre-line leading-relaxed">
                    {scenario.branches[selectedChoice].text}
                  </p>
                </div>

                {scenario.branches[selectedChoice].hasWord ? (
                  <div className="bg-green-100 border-2 border-green-500 rounded-lg p-4 text-center">
                    <p className="text-green-800 font-bold text-xl">
                      âœ¨ ã€ã‚‚ã†ã²ã¨ã¤ã€‘ãƒ¯ãƒ¼ãƒ‰ã‚²ãƒƒãƒˆ! âœ¨
                    </p>
                  </div>
                ) : (
                  <div className="bg-red-100 border-2 border-red-500 rounded-lg p-4 text-center">
                    <p className="text-red-800 font-bold">
                      æ®‹å¿µ...ã€ã‚‚ã†ã²ã¨ã¤ã€‘ã¯å‡ºã¾ã›ã‚“ã§ã—ãŸ
                    </p>
                  </div>
                )}

                <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
                  <p className="text-sm text-blue-600 font-semibold mb-1">å¾Œæ—¥è«‡</p>
                  <p className="text-gray-700 whitespace-pre-line">
                    {scenario.branches[selectedChoice].epilogue || scenario.epilogue}
                  </p>
                </div>

                <button
                  onClick={backToSelection}
                  className="w-full bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-bold py-4 px-6 rounded-lg transition-all"
                >
                  ã‚·ãƒŠãƒªã‚ªé¸æŠã«æˆ»ã‚‹
                </button>
              </div>
            )}
          </div>
        </div>
      );
    }

    // ã‚¢ãƒ—ãƒªã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<MiniNovelGame />);
  </script>
</body>
</html>

